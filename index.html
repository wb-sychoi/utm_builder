<!DOCTYPE html>
<html lang="en">
<!-- <html lang="en" data-bs-theme="dark / light"> -->

<head>
    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">

    <title>UTM BUILDER</title>
    <style>
        body {
            width: 100%;
            padding: 20px;
        }

        #create_campaign_name,
        #create_ad_group_name,
        #create_ad_name {
            margin: 10px;
            padding: 10px;
            border: 2px solid black;
            width: 1200px;
        }

        .table_box {
            font-size: 12px;
        }

        .example_text {
            font-size: 14px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <h1>BUILDER</h1>

    <div id="create_campaign_name" class="container border border-secondary rounded-2">
        <div class="row">
            <div class="col-auto">
                <h3>캠페인명 생성하기 <span class="example_text">| 예: 00.브랜드-AA</span></h3>
            </div>
            <div class="col-auto">
                <button type="button" onclick="campaignOutput()" class="btn btn-dark btn-sm"
                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                    생성하기</button>
            </div>
        </div>

        <div class="container text-left">
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="campaign_name_number" class="col-form-label">순번</label>
                </div>
                <div class="col-auto">
                    <input type="text" id="campaign_name_number" class="form-control form-control-sm" placeholder="00">
                </div>
                <div class="col-auto">
                    <button type="button" class="btn btn-sm btn-danger"
                        style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;"
                        data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                        data-bs-content="2자리 숫자로 입력해야 하며 첫 시작은 00입니다.">
                        입력가이드
                    </button>
                </div>
            </div>

            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="campaign_name_title" class="col-form-label">캠페인명</label>
                </div>
                <div class="col-auto">
                    <input type="text" id="campaign_name_title" class="form-control form-control-sm"
                        placeholder="{아이템}_{아이템}_...">
                </div>
                <div class="col-auto">
                    <button type="button" class="btn btn-sm btn-danger"
                        style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;"
                        data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                        data-bs-content="캠페인 주제에 해당하는 내용을 설정하고 띄어쓰기가 필요할 경우 언더바 _ 로 설정해야 합니다. (띄어쓰기 금지)">입력가이드</button>
                </div>
            </div>

            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="campaign_name_code" class="col-form-label">코드</label>
                </div>
                <div class="col-auto">
                    <input type="text" id="campaign_name_code" class="form-control form-control-sm"
                        placeholder="AA~AZ, A0~A9, BA~BZ, ...">
                </div>
                <div class="col-auto">
                    <button type="button" class="btn btn-sm btn-danger"
                        style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;"
                        data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                        data-bs-content="고유한 코드값이 설정되어야 하며 A-Z까지 두자리로 설정해야 합니다. 수량이 많은 경우 Z다음에 0-9까지 사용 가능합니다.">입력가이드</button>
                </div>
            </div>
        </div>

        <div class="row align-items-center">
            <div class="col-auto">
                <h3>캠페인명 결과:</h3>
            </div>
            <div class="col-auto">
                <pre id="campaign_name_result">(여기에 출력됩니다)</pre>
            </div>
        </div>
    </div>

    <div id="create_ad_group_name" class="container border border-secondary rounded-2">
        <div class="row">
            <div class="col-auto">
                <h3>광고그룹명 생성하기 <span class="example_text">| 예: 00.AA-자사몰_일반-BR-A-M-NSPW</span></h3>
            </div>
            <div class="col-auto">
                <button type="button" onclick="adGroupOutput()" class="btn btn-dark btn-sm"
                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                    생성하기</button>
            </div>
        </div>

        <div class="container text-left">
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="ad_group_name_number" class="col-form-label">순번</label>
                </div>
                <div class="col-auto">
                    <input type="text" id="ad_group_name_number" class="form-control form-control-sm" placeholder="00">
                </div>
                <div class="col-auto">
                    <button type="button" class="btn btn-sm btn-danger"
                        style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;"
                        data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                        data-bs-content="2자리 숫자로 입력해야 하며 첫 시작은 00입니다.">입력가이드</button>
                </div>
            </div>
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="ad_group_name_code" class="col-form-label">캠페인 코드 자동 추출</label>
                </div>
                <div class="col-auto">
                    <input type="text" id="ad_group_name_code" class="form-control form-control-sm"
                        placeholder="예: 00.브랜드-AA" disabled readonly>
                </div>
                <!-- 비활성화하고 캠페인명 결과값을 자동으로 입력하는 것으로 수정 필요 -->
                <div class="col-auto">
                    <button type="button" class="btn btn-sm btn-danger"
                        style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;"
                        data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                        data-bs-content="위에서 생성된 캠페인명이 자동으로 입력됩니다.">입력가이드</button>
                </div>
            </div>
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="ad_group_name_title" class="col-form-label">광고그룹명</label>
                </div>
                <div class="col-auto">
                    <input type="text" id="ad_group_name_title" class="form-control form-control-sm"
                        placeholder="{아이템}_{아이템}_...">
                </div>
                <div class="col-auto">
                    <button type="button" class="btn btn-sm btn-danger"
                        style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;"
                        data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                        data-bs-content="광고그룹과 관련된 내용을 설정하고 띄어쓰기가 필요할 경우 언더바 _ 로 설정해야 합니다. (띄어쓰기 금지)">입력가이드</button>
                </div>
            </div>
        </div>

        <div class="container text-center">
            <div class="row">
                <div class="col-auto">
                    <div class="row g-2 align-items-center">
                        <div class="col-auto">
                            <label for="ad_group_name_type">핵심목표</label>
                        </div>
                        <div class="col-auto">
                            <select id="ad_group_name_type" class="form-select form-select-sm"
                                aria-label="ad group name type">
                                <option selected value="">-- 필수선택 --</option>
                                <option value="BR">브랜딩</option>
                                <option value="CV">전환</option>
                                <option value="LD">리드</option>
                                <option value="TR">트래픽</option>
                                <option value="EG">참여</option>
                                <option value="RT">리타게팅</option>
                                <option value="PM">프로모션</option>
                                <option value="MX">혼합</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-auto">
                    <div class="row g-2 align-items-center">
                        <div class="col-auto">
                            <label for="ad_group_name_time">운영방식</label>
                        </div>
                        <div class="col-auto">
                            <select id="ad_group_name_time" class="form-select form-select-sm"
                                aria-label="ad group name time">
                                <option selected value="">-- 필수선택 --</option>
                                <option value="A">상시</option>
                                <option value="T">일시</option>
                                <option value="R">정기</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-auto">
                    <div class="row g-2 align-items-center">
                        <div class="col-auto">
                            <label for="ad_group_name_device">디바이스</label>
                        </div>
                        <div class="col-auto">
                            <select id="ad_group_name_device" class="form-select form-select-sm"
                                aria-label="ad group name device">
                                <option selected value="">-- 필수선택 --</option>
                                <option value="A">전체</option>
                                <option value="M">모바일</option>
                                <option value="P">데스크톱</option>
                                <option value="T">테블릿</option>
                                <option value="V">영상기기(TV)</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-auto">
                    <div class="row g-2 align-items-center">
                        <div class="col-auto">
                            <label for="ad_group_name_platform">매체/유형</label>
                        </div>
                        <div class="col-auto">
                            <select id="ad_group_name_platform" class="form-select form-select-sm"
                                aria-label="ad group name platform">
                                <option selected value="">-- 필수선택 --</option>
                                <option value="NSPW">네이버 파워링크</option>
                                <option value="NSSP">네이버 쇼핑검색</option>
                                <option value="NSBR">네이버 브랜드검색</option>
                                <option value="NSPC">네이버 파워콘텐츠</option>
                                <option value="NSPL">네이버 플레이스</option>
                                <option value="GGSA">구글 검색</option>
                                <option value="GGDA">구글 디스플레이</option>
                                <option value="GGDG">구글 디멘드젠</option>
                                <option value="GGVA">구글 동영상</option>
                                <option value="GGPX">구글 PMAX</option>
                                <option value="MTAR">메타 인지도</option>
                                <option value="MTTR">메타 트래픽</option>
                                <option value="MTEG">메타 참여</option>
                                <option value="MTLD">메타 리드(잠재고객)</option>
                                <option value="MTAP">메타 앱 홍보</option>
                                <option value="MTSL">메타 판매</option>
                                <!-- <option value="MBRS">모비온 쇼핑</option> -->
                                <!-- <option value="MBDB">모비온 DB전환</option> -->
                                <!-- <option value="MBTR">모비온 유입</option> -->
                                <!-- <option value="MBBR">모비온 브랜딩</option> -->
                                <!-- <option value="MBPC">모비온 가망고객</option> -->
                                <option value="CTCA">크리테오 신규고객</option>
                                <option value="CTRT">크리테오 리타겟팅</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container text-center">
            <div class="row">
                <!-- 1. 네이버 브랜드 검색 선택시 2. 디바이스 PC 선택 시 활성화 -->
                <div id="ad_group_name_pc" class="col-auto d-none">
                    <div class="row g-2 align-items-center">
                        <div class="col-auto">
                            <label for="ad_group_name_pc_placement">PC 네이버 브랜드 검색 클릭위치</label>
                        </div>
                        <div class="col-auto">
                            <select id="ad_group_name_pc_placement" class="form-select form-select-sm"
                                aria-label="ad group name pc placement">
                                <option selected value="">-- 필수선택 --</option>
                                <option value="homelink">홈 링크</option>
                                <option value="brandnews">브랜드소식</option>
                                <option value="main_image">메인 콘텐츠</option>
                                <option value="main_text">텍스트 링크</option>
                                <option value="sublink_1">서브링크1</option>
                                <option value="sublink_2">서브링크2</option>
                                <option value="sublink_3">서브링크3</option>
                                <option value="sublink_4">서브링크4</option>
                                <option value="thumbnail_1">썸네일1</option>
                                <option value="thumbnail_2">썸네일2</option>
                                <option value="thumbnail_3">썸네일3</option>
                                <option value="dynamic_1">다이나믹 썸네일1</option>
                                <option value="dynamic_2">다이나믹 썸네일2</option>
                                <option value="dynamic_3">다이나믹 썸네일3</option>
                                <option value="dynamic_4">다이나믹 썸네일4</option>
                                <option value="dynamic_5">다이나믹 썸네일5</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- 1. 네이버 브랜드 검색 선택시 2. 디바이스 모바일 선택 시 활성화 -->
                <div id="ad_group_name_mo" class="col-auto d-none">
                    <div class="row g-2 align-items-center">
                        <div class="col-auto">
                            <label for="ad_group_name_mo_placement">모바일 네이버 브랜드 검색 클릭위치</label>
                        </div>
                        <div class="col-auto">
                            <select id="ad_group_name_mo_placement" class="form-select form-select-sm"
                                aria-label="ad group name mo placement">
                                <option selected value="">-- 필수선택 --</option>
                                <option value="homelink">홈 링크</option>
                                <option value="brandnews">브랜드소식</option>
                                <option value="main_image">메인 콘텐츠</option>
                                <option value="main_text">텍스트 링크</option>
                                <option value="thumbnail_1">썸네일1</option>
                                <option value="thumbnail_2">썸네일2</option>
                                <option value="thumbnail_3">썸네일3</option>
                                <option value="btn_1">버튼1</option>
                                <option value="btn_2">버튼2</option>
                                <option value="btn_3">버튼3</option>
                                <option value="btn_4">버튼4</option>
                                <option value="tab1_th1">다이나믹 썸네일 탭1-썸네일1</option>
                                <option value="tab1_th2">다이나믹 썸네일 탭1-썸네일2</option>
                                <option value="tab1_th3">다이나믹 썸네일 탭1-썸네일3</option>
                                <option value="tab2_th1">다이나믹 썸네일 탭2-썸네일1</option>
                                <option value="tab2_th2">다이나믹 썸네일 탭2-썸네일2</option>
                                <option value="tab2_th3">다이나믹 썸네일 탭2-썸네일3</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row align-items-center">
            <div class="col-auto">
                <h3>광고그룹명 결과:</h3>
            </div>
            <div class="col-auto">
                <pre id="ad_group_name_result">(여기에 출력됩니다)</pre>
            </div>
        </div>
    </div>

    <div id="create_ad_name" class="container border border-secondary rounded-2">
        <div class="row">
            <div class="col-auto">
                <h3>광고/에셋명 생성하기 <span class="example_text">| 예: 자려한_코성형-A-00-Y-I-250529</span></h3>
            </div>
            <div class="col-auto">
                <button type="button" onclick="adOutput()" class="btn btn-dark btn-sm"
                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                    생성하기</button>
            </div>
        </div>

        <div class="container text-left">
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="ad_name_title" class="col-form-label">소재명</label>
                </div>
                <div class="col-auto">
                    <input type="text" id="ad_name_title" class="form-control form-control-sm"
                        placeholder="{주제1}_{주제1.1}_{주제1.1.1}">
                </div>
                <div class="col-auto">
                    <button type="button" class="btn btn-sm btn-danger"
                        style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;"
                        data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                        data-bs-content="소재와 관련된 내용을 설정하고 띄어쓰기가 필요할 경우 언더바 _ 로 설정해야 합니다. (띄어쓰기 금지)">입력가이드</button>
                </div>
            </div>
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="ad_name_ab_test" class="col-form-label">A/B테스트</label>
                </div>
                <div class="col-auto">
                    <input type="text" id="ad_name_ab_test" class="form-control form-control-sm" placeholder="A or B">
                </div>
                <div class="col-auto">
                    <button type="button" class="btn btn-sm btn-danger"
                        style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;"
                        data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                        data-bs-content="A/B 테스트 진행 시 대문자로 기입해야 합니다. (미진행 시 기본값 A)">입력가이드</button>
                </div>
            </div>
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="ad_name_version" class="col-form-label">버전</label>
                </div>
                <div class="col-auto">
                    <input type="text" id="ad_name_version" class="form-control form-control-sm" placeholder="00">
                </div>
                <div class="col-auto">
                    <button type="button" class="btn btn-sm btn-danger"
                        style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;"
                        data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                        data-bs-content="2자리 숫자로 입력해야 하며 첫 시작은 00입니다.">입력가이드</button>
                </div>
            </div>
        </div>

        <div class="container text-center">
            <div class="row">
                <div class="col-auto">
                    <div class="row g-2 align-items-center">
                        <div class="col-auto">
                            <label for="ad_name_deliberate">심의정보</label>
                        </div>
                        <div class="col-auto">
                            <select id="ad_name_deliberate" class="form-select form-select-sm"
                                aria-label="ad name deliberate">
                                <option selected value="">-- 필수선택 --</option>
                                <option value="O">일반</option>
                                <option value="Y">심의완료</option>
                                <option value="N">비심의</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-auto">
                    <div class="row g-2 align-items-center">
                        <div class="col-auto">
                            <label for="ad_name_type">소재유형</label>
                        </div>
                        <div class="col-auto">
                            <select id="ad_name_type" class="form-select form-select-sm" aria-label="ad name type">
                                <option selected value="">-- 필수선택 --</option>
                                <option value="I">이미지</option>
                                <option value="V">영상</option>
                                <option value="M">복합</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-auto">
                    <div class="row g-2 align-items-center">
                        <div class="col-auto">
                            <label for="ad_name_date">날짜</label>
                        </div>
                        <div class="col-auto">
                            <input type="date" id="ad_name_date" class="form-control form-control-sm"
                                aria-label="ad name date">
                        </div>
                        <div class="col-auto">
                            <span id="ad_name_date_result"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row align-items-center">
            <div class="col-auto">
                <h3>광고/에셋명 결과:</h3>
            </div>
            <div class="col-auto">
                <pre id="ad_name_result">(여기에 출력됩니다)</pre>
            </div>
        </div>
    </div>

    <div id="create_utm_url">
        <div class="row">
            <div class="col-auto">
                <button type="button" onclick="createUtmUrl()" class="btn btn-dark btn-sm"
                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                    UTM 생성</button>
            </div>
            <div class="col-auto">
                <!-- UTM 결과 보여주는 곳 -->
                <pre id="utm_url_result">(여기에 UTM URL이 생성됩니다)</pre>
            </div>
        </div>

    </div>

    <hr>
    <div>
        <div class="row">
            <div class="col-auto">
                <h1>GUIDE</h1>
            </div>
            <div class="col-auto">
                <button type="button" id="view_button" class="btn btn-dark btn-sm"
                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                    보기</button>
            </div>
        </div>
    </div>
    <div id="guide_box" class="hidden">
        <div class="utm_table">
            <!-- <h3>UTM 구조 예시</h3> -->
            <table border="1" class="table_box table table-hover caption-top">
                <caption>UTM 구조 예시</caption>
                <thead class="table-dark">
                    <tr>
                        <th>매체명</th>
                        <th>광고유형</th>
                        <th>utm_source</th>
                        <th>utm_medium</th>
                        <th>utm_campaign</th>
                        <th>utm_content</th>
                        <th>utm_term</th>
                        <th>utm_id</th>
                        <th>utm 적용 예시</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- 네이버 -->
                    <tr>
                        <td rowspan="2">네이버</td>
                        <td>파워링크</td>
                        <td>naver</td>
                        <td>cpc</td>
                        <td>광고그룹명</td>
                        <td>{query}</td>
                        <td>{keyword}</td>
                        <td>{ad}</td>
                        <td>utm_source=naver&utm_medium=cpc&utm_campaign=광고그룹명&utm_content={query}&utm_term={keyword}&utm_id={ad}
                        </td>
                    </tr>
                    <tr>
                        <!-- 네이버 셀은 rowspan으로 병합했으므로 생략 -->
                        <td>브랜드검색</td>
                        <td>naver</td>
                        <td>cpc</td>
                        <td>광고그룹명</td>
                        <td>{query}-클릭위치(enum)</td>
                        <td>{keyword}</td>
                        <td>{ad}</td>
                        <td>utm_source=naver&utm_medium=cpc&utm_campaign=광고그룹명&utm_content={query}-클릭위치(enum)&utm_term={keyword}&utm_id={ad}
                        </td>
                    </tr>
                    <!-- 구글 -->
                    <tr>
                        <td rowspan="5">구글</td>
                        <td>검색</td>
                        <td>google</td>
                        <td>cpc</td>
                        <td>광고그룹명</td>
                        <td></td>
                        <td>{keyword}</td>
                        <td>{creative}</td>
                        <td>utm_source=google&utm_medium=cpc&utm_campaign=광고그룹명&utm_term={keyword}&utm_id={creative}
                        </td>
                    </tr>
                    <tr>
                        <td>디스플레이</td>
                        <td>google</td>
                        <td>display</td>
                        <td>광고그룹명</td>
                        <td>광고명</td>
                        <td></td>
                        <td>{creative}</td>
                        <td>utm_source=google&utm_medium=display&utm_campaign=광고그룹명&utm_content=광고명&utm_id={creative}
                        </td>
                    </tr>
                    <tr>
                        <td>동영상</td>
                        <td>google</td>
                        <td>paid_video</td>
                        <td>광고그룹명</td>
                        <td>광고명</td>
                        <td></td>
                        <td>{creative}</td>
                        <td>utm_source=google&utm_medium=paid_video&utm_campaign=광고그룹명&utm_content=광고명&utm_id={creative}
                        </td>
                    </tr>
                    <tr>
                        <td>디멘드젠</td>
                        <td>google</td>
                        <td>cpc</td>
                        <td>광고그룹명</td>
                        <td>광고명</td>
                        <td></td>
                        <td>{creative}</td>
                        <td>utm_source=google&utm_medium=cpc&utm_campaign=광고그룹명&utm_content=광고명&utm_id={creative}
                        </td>
                    </tr>
                    <tr>
                        <td>PMAX</td>
                        <td>google</td>
                        <td>cpc</td>
                        <td>광고그룹명</td>
                        <td>에셋그룹명</td>
                        <td></td>
                        <td>에셋그룹ID - 수동입력</td>
                        <td>utm_source=google&utm_medium=cpc&utm_campaign=캠페인명&utm_content=에셋그룹명&utm_id=애셋그룹ID
                            -
                            수동입력
                        </td>
                    </tr>
                    <!-- 메타 -->
                    <tr>
                        <td colspan="2">메타</td>
                        <td>{{site_source_name}}</td>
                        <td>paid_social</td>
                        <td>{{adset.name}}</td>
                        <td>{{ad.name}}-{{placement}}</td>
                        <td></td>
                        <td>{{ad.id}}</td>
                        <td>utm_source={{site_source_name}}&utm_medium=paid_social&utm_campaign={{adset.name}}&utm_content={{ad.name}}-{{placement}}&utm_id={{ad.id}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="media_table">
            <!-- <h3>매체별 이름 구조 예시</h3> -->
            <table border="1" class="table_box table table-hover caption-top">
                <caption>매체별 이름 구조 예시</caption>
                <thead class="table-dark">
                    <tr>
                        <th>매체명</th>
                        <th>광고유형</th>
                        <th>캠페인명</th>
                        <th>광고그룹명</th>
                        <th>광고명</th>
                        <th rowspan="2">매체별 이름 구조 설정 규칙</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="2">예시</td>
                        <td>순번.{아이템}_{아이템}_...-{CODE}</td>
                        <td>순번.{CODE}-{아이템}_{아이템}_...-핵심목표-운영방식-디바이스-매체/캠페인유형-추가데이터</td>
                        <td>{주제1}_{주제1-1}-A/B-버전-심의정보-소재유형-등록일자-추가설명</td>
                        <td rowspan="9" class="table-active">1. 같은 항목 및 띄어쓰기는 언더바(_) 로 작성 (띄어쓰기 금지)<br>예)
                            01.브랜드_자사명
                            (O)
                            / 1. 브랜드 자사명 (X)<br>
                            2. 순번은 마침표(.)로 구분, 구분자는 하이픈(-)으로 작성<br>예) 00.브랜드_자사명-GG<br>
                            3. 마침표(.), 하이픈(-), 언더바(_) 외 특수문자 사용 금지<br>
                            4. 코드명의 경우 A-Z 사이 2자리로 알파벳으로 구분<br>(만약 한 캠페인유형에서 AZ 까지 많을 경우 AA, AB, AC … AY,
                            AZ, A0,
                            A1, …
                            A9까지
                            가능)
                        </td>
                    </tr>
                    <!-- 네이버 -->
                    <tr>
                        <td rowspan="2">네이버</td>
                        <td>파워링크</td>
                        <td>00.파워링크캠페인이름-AA</td>
                        <td>00.AA-파워링크광고그룹이름-TR-A-P-NSPW</td>
                        <td></td>
                    </tr>
                    <tr>
                        <!-- 네이버 셀은 rowspan으로 병합했으므로 생략 -->
                        <td>브랜드검색</td>
                        <td>00.브랜드검색캠페인이름-BA</td>
                        <td>00.BA-브랜드검색광고그룹이름-BR-A-M-NSBR</td>
                        <td></td>
                    </tr>
                    <!-- 구글 -->
                    <tr>
                        <td rowspan="5">구글</td>
                        <td>검색</td>
                        <td>00.구글검색캠페인이름-AA</td>
                        <td>00.AA-구글검색광고세트이름-TR-A-A-GGSA</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>디스플레이</td>
                        <td>00.디스플레이캠페인이름-BA</td>
                        <td>00.BA-디스플레이광고세트이름-CV-A-A-GGDA</td>
                        <td>디스플레이광고주제-A-00-O-I-250429</td>
                    </tr>
                    <tr>
                        <td>동영상</td>
                        <td>00.동영상캠페인이름-CA</td>
                        <td>00.CA-동영상광고세트이름-EG-A-A-GGDA</td>
                        <td>동영상광고주제-A-00-O-V-250429</td>
                    </tr>
                    <tr>
                        <td>디멘드젠</td>
                        <td>00.디멘드젠캠페인이름-DA</td>
                        <td>00.DA-디멘드젠광고세트이름-LD-A-A-GGDA</td>
                        <td>디멘드젠광고주제-A-00-O-M-250429</td>
                    </tr>
                    <tr>
                        <td>PMAX</td>
                        <td>00.PMAX캠페인이름-EA</td>
                        <td>00.EA-PMAX광고세트이름-MX-A-A-GGDA</td>
                        <td></td>
                        </td>
                    </tr>
                    <!-- 메타 -->
                    <tr>
                        <td colspan="2">메타</td>
                        <td>00.메타캠페인이름-AA</td>
                        <td>00.AA-메타광고세트이름-TR-A-A-MTTR</td>
                        <td>메타광고주제-A-00-O-V-250429</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        const viewBtn = document.getElementById('view_button');
        const guideBox = document.getElementById('guide_box');

        viewBtn.addEventListener("click", () => {
            const isHidden = guideBox.classList.contains("hidden");
            guideBox.classList.toggle("hidden");
            viewBtn.textContent = isHidden ? "닫기" : "보기";
        });

        const _UTMMAPPING = {
            NSPW: {
                utm_source: "naver",
                utm_medium: "cpc",
                utm_content: "{query}",
                utm_term: "{keyword}",
                utm_id: "{ad}"
            },
            NSBR: {
                utm_source: "naver",
                utm_medium: "cpc",
                // utm_content: "{query}-클릭위치(enum)",
                utm_term: "{keyword}",
                utm_id: "{ad}"
            },
            GGSA: {
                utm_source: "google",
                utm_medium: "cpc",
                utm_term: "{keyword}",
                utm_id: "{creative}"
            },
            GGDA: {
                utm_source: "google",
                utm_medium: "display",
                utm_id: "{creative}"
            },
            GGVA: {
                utm_source: "google",
                utm_medium: "paid_video",
                utm_id: "{creative}"
            },
            GGDG: {
                utm_source: "google",
                utm_medium: "cpc",
                utm_id: "{creative}"
            },
            GGPX: {
                utm_source: "google",
                utm_medium: "cpc",
                utm_id: "에셋그룹ID-수동입력"
            },
            MTAR: {
                utm_source: "{{site_source_name}}}",
                utm_medium: "paid_social",
                utm_campaign: "{{adset.name}}",
                utm_content: "{{ad.name}}-{{placement}}",
                utm_id: "{{ad.id}}"
            },
            MTTR: {
                utm_source: "{{site_source_name}}}",
                utm_medium: "paid_social",
                utm_campaign: "{{adset.name}}",
                utm_content: "{{ad.name}}-{{placement}}",
                utm_id: "{{ad.id}}"
            },
            MTEG: {
                utm_source: "{{site_source_name}}}",
                utm_medium: "paid_social",
                utm_campaign: "{{adset.name}}",
                utm_content: "{{ad.name}}-{{placement}}",
                utm_id: "{{ad.id}}"
            },
            MTLD: {
                utm_source: "{{site_source_name}}}",
                utm_medium: "paid_social",
                utm_campaign: "{{adset.name}}",
                utm_content: "{{ad.name}}-{{placement}}",
                utm_id: "{{ad.id}}"
            },
            MTAP: {
                utm_source: "{{site_source_name}}}",
                utm_medium: "paid_social",
                utm_campaign: "{{adset.name}}",
                utm_content: "{{ad.name}}-{{placement}}",
                utm_id: "{{ad.id}}"
            },
            MTSL: {
                utm_source: "{{site_source_name}}}",
                utm_medium: "paid_social",
                utm_campaign: "{{adset.name}}",
                utm_content: "{{ad.name}}-{{placement}}",
                utm_id: "{{ad.id}}"
            },
            CTCA: {
                utm_source: "criteo",
                utm_medium: "display",
                utm_id: "{{adid}}"
            },
            CTRT: {
                utm_source: "criteo",
                utm_medium: "display",
                utm_id: "{{adid}}"
            },
        }


        function campaignOutput() {
            const campaignNameNumber = document.getElementById("campaign_name_number").value;
            const campaignNameTitle = document.getElementById("campaign_name_title").value;
            const campaignNameCode = document.getElementById("campaign_name_code").value;

            const output = `${campaignNameNumber}.${campaignNameTitle}-${campaignNameCode}`;
            document.getElementById("campaign_name_result").textContent = output;

            // <pre>에 출력
            document.getElementById("campaign_name_result").textContent = output;

            // input에도 자동 입력
            document.getElementById("ad_group_name_code").value = output;
        }

        function adGroupOutput() {
            const adGroupNameNumber = document.getElementById("ad_group_name_number").value;
            const adGroupNameCode = document.getElementById("ad_group_name_code").value;
            const adGroupNameCodeSplit = adGroupNameCode.split("-");
            const adGroupNameCodeResult = adGroupNameCodeSplit[adGroupNameCodeSplit.length - 1]
            const adGroupNameTitle = document.getElementById("ad_group_name_title").value;
            const adGroupNameType = document.getElementById("ad_group_name_type").value;
            const adGroupNameTime = document.getElementById("ad_group_name_time").value;
            const adGroupNameDevice = document.getElementById("ad_group_name_device").value;
            const adGroupNamePlatform = document.getElementById("ad_group_name_platform").value;

            const output = `${adGroupNameNumber}.${adGroupNameCodeResult}-${adGroupNameTitle}-${adGroupNameType}-${adGroupNameTime}-${adGroupNameDevice}-${adGroupNamePlatform}`;
            document.getElementById("ad_group_name_result").textContent = output;
        }

        const platformSelect = document.getElementById("ad_group_name_platform");
        const deviceSelect = document.getElementById('ad_group_name_device');

        const adGroupNamePc = document.getElementById("ad_group_name_pc");
        const adGroupNameMo = document.getElementById("ad_group_name_mo");

        function naverBrandSearchSelected() {
            const selectedPlatform = platformSelect.value;
            const selectedDevice = deviceSelect.value;

            adGroupNamePc.classList.add('d-none');
            adGroupNameMo.classList.add('d-none');
            adGroupNamePc.classList.remove('d-block');
            adGroupNameMo.classList.remove('d-block');

            if (selectedDevice === 'P' && selectedPlatform === 'NSBR') {
                adGroupNamePc.classList.remove('d-none');
                adGroupNamePc.classList.add('d-block');
            } else if (selectedDevice === 'M' && selectedPlatform === 'NSBR') {
                adGroupNameMo.classList.remove('d-none');
                adGroupNameMo.classList.add('d-block');
            }
        }

        platformSelect.addEventListener('change', naverBrandSearchSelected);
        deviceSelect.addEventListener('change', naverBrandSearchSelected);

        document.getElementById("ad_name_date").addEventListener("change", function () {
            const date = new Date(this.value);
            if (!isNaN(date)) {
                const yy = String(date.getFullYear()).slice(2);
                const mm = String(date.getMonth() + 1).padStart(2, '0');
                const dd = String(date.getDate()).padStart(2, '0');
                const result = `${yy}${mm}${dd}`;
                document.getElementById("ad_name_date_result").textContent = result;
            } else {
                document.getElementById("ad_name_date_result").textContent = '';
            }
        });

        function adOutput() {
            const adNameTitle = document.getElementById("ad_name_title").value;
            const adNameAbTest = document.getElementById("ad_name_ab_test").value;
            const adNameVersion = document.getElementById("ad_name_version").value;
            const adNameDeliberate = document.getElementById("ad_name_deliberate").value;
            const adNameType = document.getElementById("ad_name_type").value;
            const adNameDateResult = document.getElementById("ad_name_date_result").textContent;

            const output = `${adNameTitle}-${adNameVersion}-${adNameDeliberate}-${adNameType}-${adNameDateResult}`;
            document.getElementById("ad_name_result").textContent = output;
        }

        function createUtmUrl() {
            const select = document.getElementById("ad_group_name_platform").value;
            console.log(select)
            const resultBox = document.getElementById("utm_url_result");
            const adGroupName = document.getElementById("ad_group_name_result").textContent.trim();
            const adName = document.getElementById("ad_name_result").textContent.trim();

            if (!select) {
                alert("매체/유형을 선택하세요!");
                return;
            }
            if (!adGroupName || adGroupName === "(여기에 출력됩니다)") {
                alert("광고그룹명을 먼저 생성하세요!");
                return;
            }
            if (!adName || adName === "(여기에 출력됩니다)") {
                // adName이 비정상일 때 utm_content를 아예 넣지 않기 위해
                // 아래에서 처리
            }

            if (_UTMMAPPING[select]) {
                const utm = _UTMMAPPING[select];
                const params = [];

                // utm_source, utm_medium, utm_term, utm_id는 있으면 그대로 사용
                if (utm.utm_source) params.push(`utm_source=${utm.utm_source}`);
                if (utm.utm_medium) params.push(`utm_medium=${utm.utm_medium}`);


                // utm_campaign: _UTMMAPPING에 있으면 그 값, 없으면 adGroupName
                let utm_campaign = utm.utm_campaign !== undefined ? utm.utm_campaign : adGroupName;
                if (utm_campaign) params.push(`utm_campaign=${utm_campaign}`);

                // utm_content: _UTMMAPPING에 있으면 그 값, 없으면 adName
                // 단, adName이 "(여기에 출력됩니다)"면 utm_content 자체를 넣지 않음
                let utm_content;
                if (utm.hasOwnProperty('utm_content')) {
                    utm_content = utm.utm_content;
                } else {
                    // 네이버 브랜드 검색의 경우 클릭위치 utm_content에 {query}와 함께 삽입
                    if (select === "NSBR") {
                        if (deviceSelect.value === "P") {
                            const pcContentName = document.getElementById("ad_group_name_pc_placement").value
                            utm_content = `{query}-${pcContentName}`;
                        } else if (deviceSelect.value === "M") {
                            const moContentName = document.getElementById("ad_group_name_mo_placement").value
                            utm_content = `{query}-${moContentName}`;
                        }
                    } else {
                        utm_content = adName;
                    }
                }
                if (
                    utm_content !== undefined &&
                    utm_content !== null &&
                    utm_content !== "" &&
                    utm_content !== "(여기에 출력됩니다)"
                ) {
                    params.push(`utm_content=${utm_content}`);
                }

                if (utm.utm_term) params.push(`utm_term=${utm.utm_term}`);
                if (utm.utm_id) params.push(`utm_id=${utm.utm_id}`);

                // 결과 출력
                const url = params.join("&");
                resultBox.textContent = url;
            } else {
                resultBox.textContent = "유효한 매체 유형이 아닙니다.";
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
    <script>
        const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
        const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
    </script>
</body>

</html>